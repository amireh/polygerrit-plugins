<link rel="import" href="../icons/fff-file-icon.html">

<dom-module id="fff-file">
  <template>
    <a class="link" href="[[url]]" on-click="_emitClose">
      [[name]]

      <template is="dom-if" if="[[comments.length]]">
        <span class="comments">
          ([[commentLabel]])
        </span>
      </template>
    </a>

  </template>

  <style>
    :host {
      display: block;
      position: relative;
      margin-left: 19px;
    }

    :host:hover {
      background: #f5fafd; /* match gr-file-list .file-row */
    }

    fff-file-icon {
      position: absolute;
      margin-left: -16px;
      margin-top: 1px;
    }

    .link {
      display: block;
      color: #2a66d9; /* match a.gr-file-list */
      /*display: inline-block;*/
      text-decoration: none;
      word-break: break-all;
      line-height: 1.25rem;
      /*vertical-align: middle;*/
      /*margin-right: 1rem;*/
    }

    .comments {
      /*display: inline-block;*/
      /*vertical-align: middle;*/
      /*position: absolute;
      top: 0;
      right: 0;*/
      /*max-width: 1rem;*/
      /*padding-right: 1rem;*/
      /*text-align: right;*/
      font-weight: bold;
      /*line-height: 1.6;*/
    }
  </style>

  <script>
    Polymer({
      is: 'fff-file',
      properties: {
        comments: {
          type: Array,
        },

        commentLabel: {
          type: String,
          computed: '_computeCommentLabel(comments)'
        },

        path: String,
        url: String
      },

      _computeCommentLabel(comments) {
        if (!comments || !comments.length) {
          return ''
        }
        else if (comments.length === 1) {
          return '1 comment'
        }
        else {
          return `${comments.length} comments`
        }
      },

      _emitClose() {
        this.fire('fff-link-clicked')
      }
    })
  </script>
</dom-module>
