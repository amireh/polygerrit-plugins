<dom-module id="fff-layout">
  <template>
    <div class="blur"></div>
    <content id="content"></content>
  </template>

  <style>
    :host([docking-style="side"]) {
      bottom: 0;
      left: 0;
      position: fixed;
      right: auto;
      top: 0;
      width: 20vw;
      z-index: 6;
    }

    :host([docking-style="overlay"]) {
      height: 50vh;
      left: 25vw;
      min-height: 320px;
      /*overflow: auto;*/
      position: fixed;
      top: 25vh;
      width: 50vw;
      z-index: 0;
    }

    :host([docking-style="overlay"]) .blur {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: rgba(0,0,0,0.4);
      z-index: -1;
    }
  </style>

  <style is="custom-style">
    body.with-fff-sidebar gr-app ::content gr-fixed-panel#header,
    body.with-fff-sidebar gr-app ::content > footer[r="contentinfo"],
    body.with-fff-sidebar gr-app ::content gr-change-view ::content #mainContent,
    body.with-fff-sidebar gr-app ::content gr-diff-view ::content gr-fixed-panel ::content .floating,
    body.with-fff-sidebar gr-app ::content gr-diff-view ::content gr-diff ::content .diffContainer
    {
      padding-left: 20vw;
    }

    body.with-fff-sidebar gr-app ::content gr-diff-view ::content gr-diff ::content #diffHeader {
      margin-left: 20vw;
    }
  </style>

  <script>
    Polymer({
      is: 'fff-layout',

      properties: {
        dockingStyle: {
          type: String,
          reflectToAttribute: true,
          observer: '_applyGlobalStyling'
        },
      },

      _applyGlobalStyling(dockingStyle) {
        document.body.classList.toggle('with-fff-sidebar', dockingStyle === 'side')
      },

      detached() {
        document.body.classList.toggle('with-fff-sidebar', false)
      }
    })
  </script>
</dom-module>
