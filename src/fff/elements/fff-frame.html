<link rel="import" href="../icons/fff-dock-to-side-icon.html">
<link rel="import" href="../icons/fff-overlay-icon.html">
<link rel="import" href="../icons/fff-close-icon.html">

<dom-module id="fff-frame">
  <template>
    <div class="controls">
      <template is="dom-if" if="[[isDockedToSide]]">
        <button on-click="_turnIntoOverlay" title="Undock into separate window">
          <fff-overlay-icon width="16" height="16"></fff-overlay-icon>
        </button>
      </template>

      <template is="dom-if" if="[[isOverlay]]">
        <button on-click="_dockToSide" title="Dock to left">
          <fff-dock-to-side-icon width="16" height="16"></fff-dock-to-side-icon>
        </button>
      </template>

      <button on-click="_close" title="Close FFF">
        <fff-close-icon width="20" height="20"></fff-close-icon>
      </button>
    </div>

    <div class="content-scroller">
      <content />
    </div>
  </template>

  <style>
    :host {
      display: flex;
      flex-direction: column;
      background: white;
      height: 100%;
    }

    .content-scroller {
      height: 100%;
      overflow: auto;
      padding: 0.5rem 0;
    }

    :host([docking-style="side"]) {
      border-color: #aaa;
      border-right-style: solid;
      border-right-width: 1px;
      background: white;
    }

    :host([docking-style="overlay"]) {
      box-shadow: 0 1px 10px rgba(0,0,0,.5);
      /*border: 1px solid #a0a0a2;*/
      border-radius: 8px;
      overflow: hidden;
    }

    .controls {
      background: #eee;
      text-align: right;
      padding: 0.5rem;
    }

    .controls button {
      border: none;
      background: transparent;
      cursor: pointer;
      margin-left: 0.5rem;
      vertical-align: middle;
    }

    .controls ::content svg {
      fill: #555;
      stroke-width: 0;
    }
  </style>

  <script>
    Polymer({
      is: 'fff-frame',

      properties: {
        // will be mutating this
        dockingStyle: {
          type: String,
          notify: true,
          reflectToAttribute: true
        },

        isOverlay: {
          type: Boolean,
          computed: '_computeIsOverlay(dockingStyle)'
        },

        isDockedToSide: {
          type: Boolean,
          computed: '_computeIsDockedToSide(dockingStyle)'
        },

        toggled: {
          type: Boolean,
          notify: true
        }
      },

      _changeDockingStyle(e) {
        this.set('dockingStyle', e.target.value)
      },

      _computeIsOverlay(dockingStyle) {
        return dockingStyle == 'overlay'
      },

      _computeIsDockedToSide(dockingStyle) {
        return dockingStyle == 'side'
      },

      _close() {
        this.set('toggled', false)
      },

      _dockToSide() {
        this.set('dockingStyle', 'side')
      },

      _turnIntoOverlay() {
        this.set('dockingStyle', 'overlay')
      }
    })
  </script>
</dom-module>
